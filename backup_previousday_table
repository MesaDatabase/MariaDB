# MySQL db credentials
# username="dbusers"
# password=''

# Prompt for MySQL password
# echo -n "Enter MySQL password for user $username: "
# stty -echo  # Turn off echoing
# read password
# stty echo  # Turn echoing back on
# echo  # Add a newline after the password input

# Define the path to the MySQL option file
mariadb_option_file="/etc/mysql/mariadb_client.cnf"

database="DB1"
backup_dir="/backups/DB1"

# Get current date YYYMMDD (yesterday)
# current_date=$(date +'%Y%m%d')
current_date=$(date -d "1 day ago" +'%Y%m%d')

# Get current month YYYY_mm
# current_month="${current_date:0:4}_${current_date:4:2}"


# Define table to be copied
copy_table="prefix_1_$current_date"

# Define the backup file name
backup_file_name="prefix_1_$current_date.sql"  # Updated file name

# Create dump of table
mysqldump --defaults-file="$mariadb_option_file" --databases "$database" --tables "$copy_table" > "$backup_dir/$backup_file_name"

echo "$current_date"
# echo "$current_month"
echo "$backup_dir"
echo "$copy_table"
echo "$backup_file_name"
